<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Console - Gut Healing Academy</title>
    <link rel="icon" type="image/png" href="/assets/favicon.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Source+Sans+3:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="/admin/css/admin.css">
</head>
<body>
    <!-- Loading View -->
    <div id="loading-view" class="view active">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>Loading Admin Console...</p>
        </div>
    </div>

    <!-- Access Denied View -->
    <div id="access-denied-view" class="view">
        <div class="access-denied-card">
            <h2>Access Denied</h2>
            <p>You don't have permission to access the admin console. Please contact an administrator if you believe this is an error.</p>
            <a href="/index.html" class="btn-primary" style="display: inline-block; margin-top: 16px; text-decoration: none;">Return to Member Area</a>
        </div>
    </div>

    <!-- Dashboard View -->
    <div id="dashboard-view" class="view">
        <!-- Admin Header (Dark) -->
        <header class="admin-header">
            <div class="admin-header-left">
                <div class="admin-logo-box">
                    <img src="/assets/Logo.png" alt="Gut Healing Academy" class="admin-logo">
                </div>
                <span class="admin-badge">ADMIN</span>
            </div>
            <div class="admin-header-right">
                <span id="admin-user-name" class="admin-user-name"></span>
                <button id="btn-profile" class="btn-profile">Profile</button>
                <button id="btn-logout" class="btn-logout">Logout</button>
            </div>
        </header>

        <!-- Welcome Section -->
        <div class="admin-welcome">
            <h1>Welcome, Admin</h1>
            <p>Manage support questions, Q&A sessions, and member accounts.</p>
        </div>

        <!-- Tab Navigation -->
        <nav class="tab-nav">
            <button class="tab-btn active" data-tab="support">
                Support Questions
                <span class="badge" id="support-badge" style="display: none;">0</span>
            </button>
            <button class="tab-btn" data-tab="qa">
                Live Q&A Questions
            </button>
            <button class="tab-btn" data-tab="members" disabled>
                Members
                <span class="coming-soon">Soon</span>
            </button>
            <button class="tab-btn" data-tab="settings" disabled>
                Settings
                <span class="coming-soon">Soon</span>
            </button>
        </nav>

        <!-- Tab Panels -->
        <div class="tab-panels">
            <!-- Support Questions Panel -->
            <div id="support-panel" class="tab-panel active">
                <div class="panel-card">
                    <h2 class="panel-title">Pre-Sale Support Questions</h2>
                    <p class="panel-intro">Questions submitted from the offer page by visitors considering the program.</p>

                    <!-- Filter Bar -->
                    <div class="filter-bar">
                        <div class="filter-group">
                            <label class="filter-label" for="status-filter">Status:</label>
                            <select id="status-filter" class="filter-select">
                                <option value="all">All</option>
                                <option value="pending">Pending</option>
                                <option value="responded">Responded</option>
                                <option value="call_booked">Call Booked</option>
                                <option value="converted">Converted</option>
                                <option value="closed">Closed</option>
                            </select>
                        </div>
                        <div class="filter-stats" id="filter-stats">
                            <strong>0</strong> questions (0 pending)
                        </div>
                        <div class="filter-actions">
                            <label class="auto-refresh-toggle">
                                <input type="checkbox" id="auto-refresh">
                                Auto-refresh
                            </label>
                            <button id="btn-refresh" class="btn-refresh">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M23 4v6h-6"></path>
                                    <path d="M1 20v-6h6"></path>
                                    <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10"></path>
                                    <path d="M20.49 15a9 9 0 0 1-14.85 3.36L1 14"></path>
                                </svg>
                                Refresh
                            </button>
                        </div>
                    </div>

                    <!-- Questions List -->
                    <div id="questions-list" class="questions-list">
                        <div class="empty-state">
                            <div class="empty-state-icon">ðŸ“­</div>
                            <h3>No questions yet</h3>
                            <p>Questions from the offer page will appear here when visitors submit them.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Live Q&A Panel -->
            <div id="qa-panel" class="tab-panel">
                <!-- Session Management Section -->
                <div class="panel-card">
                    <div class="panel-header-row">
                        <div>
                            <h2 class="panel-title">Live Q&A Sessions</h2>
                            <p class="panel-intro">Manage upcoming and past live Q&A sessions.</p>
                        </div>
                        <button id="btn-new-session" class="btn-primary">+ New Session</button>
                    </div>

                    <!-- Session Form (hidden by default) -->
                    <div id="session-form-container" class="session-form-container" style="display: none;">
                        <h3 class="form-title" id="session-form-title">Create New Session</h3>
                        <form id="session-form" class="session-form">
                            <input type="hidden" id="session-id" value="">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="session-date">Date</label>
                                    <input type="date" id="session-date" required>
                                </div>
                                <div class="form-group">
                                    <label for="session-time">Time</label>
                                    <input type="time" id="session-time" required>
                                </div>
                                <div class="form-group">
                                    <label for="session-timezone">Timezone</label>
                                    <select id="session-timezone">
                                        <option value="GMT">GMT</option>
                                        <option value="EST">EST</option>
                                        <option value="PST">PST</option>
                                        <option value="CET">CET</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="session-topic">Topic</label>
                                <input type="text" id="session-topic" placeholder="e.g., Why Cutting Foods for Bloating Often Backfires" required>
                            </div>
                            <div class="form-group">
                                <label for="session-zoom-link">Zoom Link</label>
                                <input type="url" id="session-zoom-link" placeholder="https://us06web.zoom.us/j/...">
                            </div>
                            <div class="form-group">
                                <label for="session-host">Host</label>
                                <select id="session-host">
                                    <!-- Populated by JS -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="session-status">Status</label>
                                <select id="session-status">
                                    <option value="scheduled">Scheduled</option>
                                    <option value="live">Live</option>
                                    <option value="completed">Completed</option>
                                    <option value="cancelled">Cancelled</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="session-recording">Recording URL (optional)</label>
                                <input type="url" id="session-recording" placeholder="https://...">
                            </div>
                            <div class="form-group">
                                <label for="session-notes">Notes (optional)</label>
                                <textarea id="session-notes" rows="2" placeholder="Internal notes..."></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn-primary" id="btn-save-session">Save Session</button>
                                <button type="button" class="btn-secondary" id="btn-cancel-session">Cancel</button>
                            </div>
                        </form>
                    </div>

                    <!-- Sessions List -->
                    <div id="sessions-list" class="sessions-list">
                        <div class="loading-content">
                            <div class="loading-spinner"></div>
                            <p>Loading sessions...</p>
                        </div>
                    </div>
                </div>

                <!-- Questions Section -->
                <div class="panel-card">
                    <h2 class="panel-title">Session Questions</h2>
                    <p class="panel-intro">Questions submitted by members for the selected session.</p>

                    <!-- Session Filter -->
                    <div class="filter-bar">
                        <div class="filter-group">
                            <label class="filter-label" for="qa-session-filter">Session:</label>
                            <select id="qa-session-filter" class="filter-select">
                                <option value="">Select a session...</option>
                            </select>
                        </div>
                        <div class="filter-stats" id="qa-filter-stats">
                            <strong>0</strong> questions (0 pending)
                        </div>
                        <div class="filter-actions">
                            <label class="auto-refresh-toggle">
                                <input type="checkbox" id="qa-auto-refresh">
                                Auto-refresh
                            </label>
                            <button id="btn-qa-refresh" class="btn-refresh">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M23 4v6h-6"></path>
                                    <path d="M1 20v-6h6"></path>
                                    <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10"></path>
                                    <path d="M20.49 15a9 9 0 0 1-14.85 3.36L1 14"></path>
                                </svg>
                                Refresh
                            </button>
                        </div>
                    </div>

                    <!-- Questions List -->
                    <div id="qa-questions-list" class="questions-list">
                        <div class="empty-state">
                            <div class="empty-state-icon">ðŸ“‹</div>
                            <h3>Select a session</h3>
                            <p>Choose a session from the dropdown above to view submitted questions.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Members Panel (Coming Soon) -->
            <div id="members-panel" class="tab-panel">
                <div class="panel-card">
                    <div class="coming-soon-panel">
                        <h2>Members Management</h2>
                        <p>View and manage member accounts, subscriptions, and access levels. Coming soon!</p>
                    </div>
                </div>
            </div>

            <!-- Settings Panel (Coming Soon) -->
            <div id="settings-panel" class="tab-panel">
                <div class="panel-card">
                    <div class="coming-soon-panel">
                        <h2>Admin Settings</h2>
                        <p>Configure admin preferences, notifications, and system settings. Coming soon!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Admin Console Script -->
    <script src="/admin/js/admin.js"></script>
</body>
</html>
